#!/usr/bin/env sh

echo "ğŸš€ Running pre-commit checks to ensure code quality..."

# Formatting check
echo "ğŸ¨ Checking code formatting..."
pnpm run check-format || (
  echo "âš ï¸ Prettier check failed. Code formatting issues detected.
  
  Applying automatic formatting...";

  # Auto-format code
  pnpm run format;
  git add .;

  # Notify the user
  echo "âœ… Formatting applied and changes staged. Please review and commit again.";
)

# Linting check
# echo "ğŸ§ Running ESLint checks..."
# pnpm run lint || (
#   echo "âŒ ESLint check failed. Please review the errors above, fix the issues, and commit again.";
#   exit 1
# )

# TypeScript type check
# echo "ğŸ” Validating TypeScript types..."
# pnpm run check-types || (
#   echo "âŒ TypeScript check failed. Please resolve the type errors before committing.";
#   exit 1
# )

# If all checks pass, allow commit
echo "âœ… All checks passed! Proceeding with commit..."
echo "ğŸš€ Great job! You can now run 'git push' to upload your changes."
